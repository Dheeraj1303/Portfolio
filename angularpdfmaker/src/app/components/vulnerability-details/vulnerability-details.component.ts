import { Component } from '@angular/core';
import * as pdfMake from 'pdfmake/build/pdfmake';
import * as pdfFonts from 'pdfmake/build/vfs_fonts';

(pdfMake as any).vfs = pdfFonts.pdfMake.vfs;

@Component({
  selector: 'app-vulnerability-report',
  templateUrl: './vulnerability-report.component.html',
  styleUrls: ['./vulnerability-report.component.css']
})
export class VulnerabilityReportComponent {

  generatePDF() {
    const documentDefinition = {
      content: [
        { text: 'Vulnerability Report', style: 'header' },
        { text: 'Generated by Angular PDFMake' },
        { text: '-----------------------------------' },
        { text: 'List of Vulnerabilities:', style: 'subheader' },
        {
          ul: [
            'Vulnerability 1: Description and Details',
            'Vulnerability 2: Description and Details',
            'Vulnerability 3: Description and Details'
          ]
        },
        { text: 'Severity Chart', style: 'subheader' },
        { text: '[Chart Image Placeholder]' },
        { text: 'Executive Summary', style: 'subheader' },
        { text: 'This report summarizes the vulnerabilities detected during the security scan.' }
      ],
      styles: {
        header: { fontSize: 22, bold: true, margin: [0, 0, 0, 10] },
        subheader: { fontSize: 16, bold: true, margin: [0, 10, 0, 5] }
      }
    };

    pdfMake.createPdf(documentDefinition).download('vulnerability-report.pdf');
  }
}
